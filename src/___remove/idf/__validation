import * as PathUtils from '../../utils/path';
import * as ValidationUtils from '../../utils/validation';

import * as Paths from './relative-paths';

export async function validateIdfRegistration(idfPath: string) {
    try {
        if (!await ValidationUtils.isValidFolder(
            PathUtils.prefixPaths(idfPath, Paths.MandatoryFiles),
            PathUtils.prefixPaths(idfPath, Paths.MandatoryFolders),
            Paths.MutuallyExclusiveFilesGroup.map((files, _, __) => PathUtils.prefixPaths(idfPath, files)),
            Paths.MutuallyExclusiveFoldersGroup.map((files, _, __) => PathUtils.prefixPaths(idfPath, files)),
        )) {
            throw Error('An ESP-IDF folder must be registered.');
        }
    } catch (error) {
        throw error;
    }
}
